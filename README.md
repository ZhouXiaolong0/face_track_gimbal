# FaceTrack Gimbal

ğŸš€ **å®æ—¶äººè„¸è·Ÿè¸ªäº‘å°ç³»ç»Ÿ | Embedded AI + Robotics Demo**

------

## ğŸ“· æ¼”ç¤º

![æ¼”ç¤ºè§†é¢‘](./assets/254686252.gif)

------

## ğŸ“ˆ ç³»ç»Ÿæ€§èƒ½ç¤ºä¾‹

å†…å­˜ä½¿ç”¨ç‡ï¼š

![](./assets/mem_usage.png)



CPU ä½¿ç”¨ç‡ï¼š

![](./assets/cpu_usage.png)



GPU ä½¿ç”¨ç‡ï¼š

![](./assets/gpu_usage.png)



------

## ğŸ—ï¸é¡¹ç›®ç»“æ„

```
æœ¬é¡¹ç›®é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š
face_track_gimbal/
 â”‚
 â”œâ”€ scripts/           # Python è„šæœ¬ï¼šæ¨¡å‹æ¨ç†ã€è°ƒè¯•ã€åç§»é‡è®¡ç®—ä¸å¯è§†åŒ–
 â”‚   â”œâ”€ 0_yolo5_inference_demo.py
 â”‚   â”œâ”€ 1_extract_fp16.py
 â”‚   â”œâ”€ 2_compare_FP32_and_FP16.py
 â”‚   â””â”€ ...
 â”‚
 â”œâ”€ face_track_ctrl/   # Jetson Nano C++ é¡¹ç›®
 â”‚   â”œâ”€ app.cpp / app.h
 â”‚   â”œâ”€ camera.cpp / camera.h
 â”‚   â”œâ”€ yolo_onnx_runtime.cpp / .h
 â”‚   â””â”€ ...
 â”‚
 â””â”€ servo_control/     # STM32F103C8T6 é¡¹ç›®ï¼Œèˆµæœºæ§åˆ¶
 	â”œâ”€ main.c
	â”œâ”€ timer.c / timer.h
	â””â”€ ...
```

------

##  ğŸ’¡ é¡¹ç›®äº®ç‚¹

- ğŸ¯ **å®æ—¶äººè„¸æ£€æµ‹ä¸è·Ÿè¸ª**ï¼šJetson Nano ä¸Šè¿è¡Œ YOLOv5 ONNX æ¨¡å‹ï¼Œæ”¯æŒ CUDA/TensorRT åŠ é€Ÿã€‚  

- âš™ï¸ **äº‘å°ä¼ºæœæ§åˆ¶**ï¼šåç§»é‡é€šè¿‡ä¸²å£å‘é€ç»™ STM32F103C8T6ï¼Œé©±åŠ¨åŒè½´èˆµæœºã€‚  

  â€‹								 é˜ˆå€¼è¿‡æ»¤é¿å…å°å¹…æŠ–åŠ¨ï¼Œæå‡è·Ÿè¸ªç¨³å®šæ€§ã€‚

- ğŸ§µ **å¤šçº¿ç¨‹æ¶æ„**ï¼šè§†é¢‘é‡‡é›†ã€æ·±åº¦å­¦ä¹ æ¨ç†ã€åç§»é‡è®¡ç®—ã€å¯è§†åŒ–å’Œç³»ç»Ÿç›‘æ§åˆ†ç¦»çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œã€‚  

  â€‹							 çº¿ç¨‹å®‰å…¨é˜Ÿåˆ—ä¿è¯ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹é«˜æ•ˆè¿è¡Œã€‚

- ğŸ“Š **ç³»ç»Ÿæ€§èƒ½ç›‘æ§**ï¼šå®æ—¶è®°å½• CPUã€GPUã€å†…å­˜ä½¿ç”¨ç‡å’Œæ¸©åº¦ï¼Œå…·å¤‡åµŒå…¥å¼è®¾å¤‡è¿è¡Œè°ƒä¼˜èƒ½åŠ›ã€‚

- ğŸ–¼ï¸ **å¯è§†åŒ–ç»“æœ**ï¼šæ˜¾ç¤ºæ£€æµ‹æ¡†ã€åç§»é‡å’Œ FPSï¼Œä¾¿äºè°ƒè¯•ä¸æ¼”ç¤ºã€‚

- ğŸ“œ **å·¥ç¨‹åŒ–å®ç°**ï¼šPython + C++ è„šæœ¬æ”¯æŒå¿«é€Ÿå®éªŒä¸éªŒè¯ã€‚  STM32 MCU é©±åŠ¨å®é™…èˆµæœºã€‚

------

## scripts

**scripts**ï¼šPython è„šæœ¬ï¼Œç”¨äºæ¨¡å‹æ¨ç†ã€è°ƒè¯•ã€æ•°æ®å¤„ç†ã€æ¨¡æ‹Ÿåç§»é‡ã€å¯è§†åŒ–ç­‰ï¼Œæ–¹ä¾¿åœ¨ PC æˆ– Jetson ä¸Šæµ‹è¯•ã€‚

------

### ğŸš€ å¿«é€Ÿå¼€å§‹

```
cd scripts
pip install -r requirements.txt
python 7_face_track_gimbal.py
```

------

## face_track_ctrl

**face_track_ctrl**ï¼šC++ é¡¹ç›®ï¼Œéƒ¨ç½²åœ¨ **Jetson Nano B01**ï¼Œè´Ÿè´£æ‘„åƒå¤´é‡‡é›†ã€YOLO æ¨ç†ã€å¯è§†åŒ–ã€äº‘å°åç§»è®¡ç®—å’Œä¸²å£é€šä¿¡ã€‚

---

### ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

- Camera
  - â†’ YOLO Detector
    - â†’ Result Queue â†’ Visualizer
    - â†’ Offset Queue â†’ Gimbal Controller â†’ Serial Port
    - â†’ Telemetry (CPU/GPU/Mem) â†’ Logger

- **Detector Thread**ï¼šæ‰§è¡Œäººè„¸æ£€æµ‹ï¼Œè¾“å‡ºç»“æœã€‚  
- **Visualizer Thread**ï¼šç»˜åˆ¶æ£€æµ‹æ¡†ã€æ˜¾ç¤º FPSã€‚  
- **Gimbal Thread**ï¼šè®¡ç®—ç›®æ ‡åç§»é‡å¹¶é©±åŠ¨èˆµæœºã€‚  
- **Telemetry Thread**ï¼šé‡‡é›†å¹¶è®°å½•ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡ã€‚  

---

### ğŸ“¦ ç¯å¢ƒä¾èµ–

- **ç¡¬ä»¶**
  - NVIDIA Jetson Nano
  - USB Camera
  - åŒè½´èˆµæœºäº‘å°ï¼ˆä¸²å£æ§åˆ¶ï¼‰
- **è½¯ä»¶**
  - C++17
  - OpenCV 4.5.3
  - ONNX Runtime v1.11.0
  - spdlog
  - CMake â‰¥ 3.18.1

---

### ğŸš€ å¿«é€Ÿå¼€å§‹

1. å…‹éš†ä»“åº“ï¼š

   ```bash
   git clone https://github.com/yourname/FaceTrackGimbal.git
   cd face_track_ctrl
   ```

2. ç¼–è¯‘é¡¹ç›®ï¼š

   ```
   mkdir build && cd build
   cmake ..
   make -j4
   ```

3. è¿è¡Œç¨‹åº

   ```
   ./FaceTrackGimbal
   ```

------

## servo_control

**servo_control**ï¼šSTM32F103C8T6 ä¸Šçš„èˆµæœºæ§åˆ¶ä»£ç ï¼Œæ¥æ”¶åç§»é‡å¹¶é©±åŠ¨äº‘å°ã€‚

------

### ğŸš€ å¿«é€Ÿå¼€å§‹

- ä½¿ç”¨ STM32CubeIDE ç¼–è¯‘ `servo_control` é¡¹ç›®å¹¶çƒ§å½• MCUã€‚

------

## ğŸ”® TODO / æ”¹è¿›æ–¹å‘

-  æ”¯æŒæ›´å¤šç›®æ ‡æ£€æµ‹
-  å¢åŠ  Web å‰ç«¯è¿œç¨‹æ§åˆ¶åŠŸèƒ½
-  æ¨¡å‹é‡åŒ–ä¸ TensorRT åŠ é€Ÿï¼Œè¿›ä¸€æ­¥æå‡ FPS
-  å¢åŠ  UI æ§åˆ¶é¢æ¿ï¼Œå¢å¼ºäº¤äº’ä½“éªŒ

------

## ğŸ“œ License

MIT License

------

## ğŸ‘¤ ä½œè€…

- **Leonard ZHOU**
  - Email: 17301817631@163.com







